"use strict";(self.webpackChunkantd_myapp=self.webpackChunkantd_myapp||[]).push([[677],{4957:(e,t,s)=>{s.d(t,{q:()=>n});var r=s(2538);const n=e=>(0,r.A)({methods:"get",url:"/api/getImages",params:e})},8677:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var r=s(5043),n=s(4161),o=s(4889),c=s(3124),a=s(4957),i=s(3807),l=s(579);function d(){const[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)(!1),[p,u]=(0,r.useState)(1),m=()=>{const e={type:"comic",page:p,size:20};s||(d(!0),(0,a.q)(e).then((e=>{t((t=>[...t,...e.result.list])),u((e=>e+1)),d(!1)})).catch((e=>{d(!1)})))};return(0,r.useEffect)((()=>{const e=()=>{const{scrollTop:e,clientHeight:t,scrollHeight:s}=document.documentElement;s-e-t<300&&m()};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[s,e]),(0,r.useEffect)((()=>{m()}),[]),(0,l.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,l.jsx)(n.A,{variant:"masonry",cols:3,gap:8,children:(0,l.jsx)(i.A.PreviewGroup,{preview:{getContainer:()=>document.getElementById("root")},children:e.map(((e,t)=>(0,l.jsxs)(o.A,{children:[(0,l.jsx)(i.A,{srcSet:"".concat(e.url),src:"".concat(e.url),alt:e.title,loading:"lazy",placeholder:!0}),(0,l.jsx)(c.A,{position:"top",title:e.title})]},t)))})})})}const p=r.memo(d),u=()=>(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{style:{marginBottom:"10px"},children:"Beautiful wallpaper"}),(0,l.jsx)(p,{})]})},2538:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(4358);const n=s(7154).A.create({baseURL:"https://api.apiopen.top",timeout:5e3});n.interceptors.request.use((e=>{e.data||(e.data={});const t=(0,r.tv)("token");return t&&(e.headers.token=t),e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>{const{status:t,data:s}=e;return 200===t?s:Promise.reject(s)}),(e=>Promise.reject(e)));const o=n}}]);
//# sourceMappingURL=677.5d277258.chunk.js.map