{"version":3,"file":"static/js/410.0b71384d.chunk.js","mappings":"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","sources":["webpack://antd-myapp/./src/pages/Video/components/videoItem.module.less?3a01","pages/Video/components/videoItem.js","pages/Video/index.js","api/getVideo.js","request/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"card\":\"videoItem_card__3X4N8\",\"card__view\":\"videoItem_card__view__SeU7j\",\"card__view__data\":\"videoItem_card__view__data__yBkpM\",\"card__lenght\":\"videoItem_card__lenght__zX-SV\",\"card__play__icon\":\"videoItem_card__play__icon__65hJ3\",\"card__view__preview\":\"videoItem_card__view__preview__vA0n8\",\"card__content\":\"videoItem_card__content__9YKlj\",\"channel__video__name\":\"videoItem_channel__video__name__L9Jmn\",\"channel__data\":\"videoItem_channel__data__lVSs+\",\"channel__img\":\"videoItem_channel__img__GGvLl\",\"channel__data__text\":\"videoItem_channel__data__text__i1anL\",\"channel__name\":\"videoItem_channel__name__e-cy0\",\"channel__subdata\":\"videoItem_channel__subdata__T2NEq\",\"channel__views\":\"videoItem_channel__views__LCmsF\",\"channel__date\":\"videoItem_channel__date__rqFMC\",\"preview__video\":\"videoItem_preview__video__pDDEI\"};","import React from 'react';\nimport { useNavigate } from 'react-router-dom';\n// import XGPlayerComponent from './XGPlayerComponent.js';\nimport styles from './videoItem.module.less';\nconst VideoItem = ({ items }) => {\n  const navigate = useNavigate();\n  const handelClick = (item) => {\n    // 跳转传url\n    navigate(`/home/video/desc`, {\n      state: { id: item.id, url: item.playUrl },\n    });\n  };\n  return items.map((item) => {\n    return (\n      <div className={styles.card} key={item.id}>\n        {/* 显示封面 */}\n        <div\n          className={styles.card__view}\n          style={{\n            backgroundImage: `url(${item.coverUrl})`,\n            backgroundSize: 'cover',\n          }}\n          onClick={() => handelClick(item)}\n        >\n          <div className={styles.card__view__data}>\n            <p className={styles.card__view__preview}>Preview</p>\n            <p className={styles.card__play__icon}>\n              <svg width='8px' height='8px' viewBox='-0.5 0 7 7' version='1.1'>\n                <g\n                  id='Page-1'\n                  stroke='none'\n                  strokeWidth='1'\n                  fill='none'\n                  fillRule='evenodd'\n                >\n                  <g\n                    id='Dribbble-Light-Preview'\n                    transform='translate(-347.000000, -3766.000000)'\n                    fill='#000000'\n                  >\n                    <g id='icons' transform='translate(56.000000, 160.000000)'>\n                      <path\n                        fill='#EAECEE'\n                        d='M296.494737,3608.57322 L292.500752,3606.14219 C291.83208,3605.73542 291,3606.25002 291,3607.06891 L291,3611.93095 C291,3612.7509 291.83208,3613.26444 292.500752,3612.85767 L296.494737,3610.42771 C297.168421,3610.01774 297.168421,3608.98319 296.494737,3608.57322'\n                        id='play-[#1003]'\n                      ></path>\n                    </g>\n                  </g>\n                </g>\n              </svg>\n            </p>\n            <p className={styles.card__lenght}>{item.duration}</p>\n          </div>\n        </div>\n        <div className={styles.card__content}>\n          <p className={styles.channel__video__name}>{item.title}</p>\n          <div className={styles.channel__data}>\n            <div\n              className={styles.channel__img}\n              style={{\n                backgroundImage: `url(${item.userPic})`,\n                backgroundSize: 'cover',\n              }}\n            ></div>\n            <div className={styles.channel__data__text}>\n              <p className={styles.channel__name}>{item.userName}</p>\n              <div className={styles.channel__subdata}>\n                <p className={styles.channel__views}>\n                  {Math.ceil(Math.random() * 1000)} Views\n                </p>\n                <p className={styles.channel__date}>\n                  {Math.ceil(Math.random() * 12)}months ago\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  });\n};\nexport default VideoItem;\n","// 创建video组件\nimport React, { useEffect, useState } from 'react';\nimport { getVideoList } from '@/api/getVideo';\nimport VideoItem from './components/videoItem';\nconst VideoList = () => {\n  const [items, setItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n\n  // 加载更多数据\n  const loadMore = () => {\n    const params = {\n      page,\n      size: 20,\n    };\n    if (isLoading) return;\n    setIsLoading(true);\n    getVideoList(params)\n      .then((newData) => {\n        setItems((prevItems) => [...prevItems, ...newData.result.list]);\n        setPage((prevPage) => prevPage + 1);\n        setIsLoading(false);\n      })\n      .catch((error) => {\n        console.error('Error fetching data:', error);\n        setIsLoading(false);\n      });\n  };\n  // 监听滚动事件，加载更多\n  useEffect(() => {\n    const handleScroll = () => {\n      const { scrollTop, clientHeight, scrollHeight } =\n        document.documentElement;\n      if (scrollHeight - scrollTop - clientHeight < 300) {\n        loadMore();\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [isLoading, items]);\n  // 初始加载数据\n  useEffect(() => {\n    loadMore();\n  }, []);\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n      }}\n    >\n      <VideoItem items={items} />\n    </div>\n  );\n};\nexport default VideoList;\n","import request from '@/request/index';\n\nexport const getVideoList = (params) => {\n  return request({\n    methods: 'get',\n    url: '/api/getHaoKanVideo',\n    params,\n  });\n};\n","import { getCache } from '@/utils/tokenStorage';\nimport axios from 'axios';\n\nconst axiosInstance = axios.create({\n  // 动态设置请求地址\n  baseURL: process.env.REACT_APP_BASE_URL,\n  timeout: 5000, // 设置超时时间\n});\n// 请求拦截器\naxiosInstance.interceptors.request.use(\n  (config) => {\n    if (!config.data) {\n      config.data = {};\n    }\n    const token = getCache('token');\n    if (token) {\n      config.headers.token = token;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  },\n);\n// 响应拦截器\naxiosInstance.interceptors.response.use(\n  (response) => {\n    const { status, data } = response;\n    if (status === 200) {\n      return data;\n    } else {\n      return Promise.reject(data);\n    }\n  },\n  (error) => {\n    return Promise.reject(error);\n  },\n);\n\nexport default axiosInstance;\n"],"names":["_ref","items","navigate","useNavigate","map","item","_jsxs","className","styles","children","_jsx","style","backgroundImage","concat","coverUrl","backgroundSize","onClick","state","id","url","playUrl","handelClick","width","height","viewBox","version","stroke","strokeWidth","fill","fillRule","transform","d","duration","title","userPic","userName","Math","ceil","random","VideoList","setItems","useState","isLoading","setIsLoading","page","setPage","loadMore","params","size","request","methods","getVideoList","then","newData","prevItems","result","list","prevPage","catch","error","useEffect","handleScroll","scrollTop","clientHeight","scrollHeight","document","documentElement","window","addEventListener","removeEventListener","display","flexWrap","justifyContent","VideoItem","axiosInstance","axios","create","baseURL","process","timeout","interceptors","use","config","data","token","getCache","headers","Promise","reject","response","status"],"sourceRoot":""}